(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(76),o=n.n(i),s=(n(90),n(2)),c=n.n(s),l=n(5),u=n(7),h=n(8),d=n(10),m=n(9),p=n(11),f=(n(39),n(16)),b=n.n(f),g=n(160),v=n(161),w=n(163),y=n(53),k=n(83),x=n(77),I=n.n(x),j=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={video:null,progress:0,stream:null},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"startCamera",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.takeSnapShot({webcamVideoElement:this.state.video,keepCameraOn:!0,cameraStream:this.state.stream},function(){var e=Object(l.a)(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({stream:n.cameraStream});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==this.state.stream&&this.state.stream.getTracks().forEach(function(e){return e.stop()}),this.setState({stream:null});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({video:document.getElementById("preview-video")});case 2:this.startCamera(),window.onfocus=function(){t.startCamera()},window.onblur=function(){t.stopCamera()};case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stopCamera(),window.onfocus=null,window.onblur=null;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"captureGIF",value:function(){var e=this;this.setState({progress:.025}),y.createGIF({gifWidth:352,gifHeight:240,cameraStream:this.state.stream,numFrames:15,progressCallback:function(t){e.setState({progress:t})},completeCallback:function(){e.setState({progress:0})}},function(t){t.error||e.props.saveGIF(t.image)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"video-container",style:{zIndex:100}},r.a.createElement("div",{style:{padding:"2rem",position:"absolute",left:"50%",transform:"translate(-50%, -50%)",top:"33%",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("img",{src:I.a,className:"camera-loader"})),r.a.createElement("div",{style:{width:"100px",position:"absolute",bottom:"4rem",left:"50%",transform:"translateX(-50%)",zIndex:3}},r.a.createElement(k.a,{percent:100*this.state.progress,strokeWidth:"10",strokeColor:"#e74c3c"}),0===this.state.progress?r.a.createElement("button",{style:{padding:"2rem",position:"absolute",left:"50%",transform:"translate(-50%, -50%)",top:"48%",background:"transparent",fontWeight:"bold",color:"white",border:"none",fontSize:"2rem",outline:"none"},onClick:function(){return e.captureGIF()}},"Rec."):""),r.a.createElement("video",{className:"video",id:"preview-video",style:{zIndex:2}}))}}]),t}(a.Component),E=n(17),O=n(78),S=n.n(O),C=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={submitting:!1},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"submitGIF",value:function(){var e=Object(l.a)(c.a.mark(function e(t){var n,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({submitting:!0}),e.next=4,b.a.post("https://api.imgur.com/3/image",{image:this.props.gif.split(",")[1]},{headers:{Authorization:"Client-ID "+E.imgur.client_id}});case 4:return n=e.sent,a=n.data.data.deletehash,e.next=8,b.a.post("https://api.imgur.com/3/album/".concat(this.props.albumId,"/add"),{deletehashes:[a]},{headers:{Authorization:"Client-ID "+E.imgur.client_id}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Error Uploading :(");case 13:this.setState({submitting:!1}),this.props.exit();case 15:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",display:"flex",alignItems:"center",background:"url(".concat(this.props.gif,") no-repeat center center fixed"),backgroundSize:"cover"}},r.a.createElement("button",{style:{position:"absolute",margin:"0 auto",top:"1rem",left:"1rem",backgroundColor:"#e74c3c",outline:"none",border:"none",height:"2rem",width:"2rem",borderRadius:"50%",fontSize:"1rem",color:"white",fontWeight:"bold"},onClick:this.props.exit.bind(this)},"X"),this.state.submitting?r.a.createElement("img",{src:S.a,style:{position:"absolute",margin:"0 auto",bottom:"4rem",left:"50%",transform:"translateX(-50%)"}}):r.a.createElement("button",{style:{position:"absolute",margin:"0 auto",bottom:"4rem",left:"50%",transform:"translateX(-50%)",fontSize:"2rem",color:"white",fontWeight:"bold",background:"#27ae60",borderRadius:"2rem",border:"none",outline:"none",padding:".5rem 2.5rem"},onClick:this.submitGIF.bind(this)},"Submit"))}}]),t}(a.Component),z=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={gif:"http://i.imgur.com/IUNMjf1.gif",capturing:!0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"setGIF",value:function(e){this.setState({gif:e,capturing:!1})}},{key:"capture",value:function(){this.setState({capturing:!0})}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%"}},this.state.capturing?r.a.createElement(j,{saveGIF:this.setGIF.bind(this),albumId:this.props.match.params.deletehash}):r.a.createElement(C,{gif:this.state.gif,albumId:this.props.match.params.deletehash,exit:this.capture.bind(this)}))}}]),t}(a.Component),A=n(79),W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={video:null,gifs:[],index:0,progress:0,bpm:60,multi:!0,flip:!1},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getGIFs(),setInterval(function(){e.getGIFs()},6e4),setInterval(function(){e.changeGIF()},15e3)}},{key:"changeGIF",value:function(){this.setState({index:Math.floor(this.state.gifs.length*Math.random()),multi:Math.random()>=.5,flip:Math.random()>=.5})}},{key:"getGIFs",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://api.imgur.com/3/album/".concat(this.props.match.params.albumid),{headers:{Authorization:"Client-ID "+E.imgur.client_id}});case 2:t=e.sent,n=t.data.data.images,this.setState({gifs:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App",style:{height:"100vh",width:"100vw"}},this.state.gifs.length>0?r.a.createElement("div",{style:{width:"100%",height:"100%",minHeight:"100vh",transform:"scale(".concat(this.state.flip?-1:1,")"),background:"url(".concat(this.state.gifs[this.state.index].link,") ").concat(this.state.multi?"center center / cover":"")}}):"",this.props.deletehash?r.a.createElement(A,{value:"https://johnnyracket.github.io/gif-beat/#/record/".concat(this.props.deletehash),style:{position:"absolute",bottom:"1rem",right:"1rem",padding:".5rem",background:"white"}}):"")}}]),t}(a.Component),F=n(80),G=n.n(F),R=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={albumId:"null",deletehash:"null"},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"createAlbum",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("https://api.imgur.com/3/album",{},{headers:{Authorization:"Client-ID "+E.imgur.client_id}});case 2:return t=e.sent,e.next=5,this.setState({albumId:t.data.data.id,deletehash:t.data.data.deletehash});case 5:this.props.history.push("/view/"+this.state.albumId);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:"100%",height:"100%",minHeight:"100vh",background:"URL(".concat(G.a,")"),boxSizing:"border-box"}},r.a.createElement(g.a,{path:"/",exact:!0,render:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%",padding:"4rem 1rem",boxSizing:"border-box"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"20rem",margin:"0 auto",background:"white",padding:"2rem",borderRadius:"1rem",boxShadow:"0 0 90px 60px #fff",boxSizing:"border-box"}},r.a.createElement("h1",{style:{color:"#f0932b",fontWeight:"bold",fontSize:"5rem",textAlign:"center",margin:"1rem 0 2rem"}},"Gif Beat"),r.a.createElement("input",{onChange:function(t){return e.setState({albumId:t.target.value})},placeholder:"ID Here...",style:{fontSize:"3rem",borderRadius:".5rem",border:"solid 4px #f0932b",padding:".25rem .5rem",outline:"none"}}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:"1rem 0",alignItems:"center"}},r.a.createElement(v.a,{to:"/record/"+e.state.albumId,style:{marginRight:"1rem",fontSize:"2rem",flex:1,background:"#f0932b",padding:"1rem 0",borderRadius:".5rem",border:"none",fontWeight:"bold",color:"white",cursor:"pointer",textAlign:"center",textDecoration:"none"}},"Join!"),r.a.createElement(v.a,{to:"/view/"+e.state.albumId,style:{fontSize:"1rem",color:"#f0932b",background:"transparent",outline:"none",border:"none",cursor:"pointer",textAlign:"center",textDecoration:"none"}},"Re-Host")),r.a.createElement("div",{style:{margin:"0 auto",fontSize:"1.5rem",color:"lightgrey"}}," or "),r.a.createElement("button",{onClick:function(){e.createAlbum()},style:{margin:"1rem 0",fontSize:"1.5rem",fontWeight:"bold",color:"#f0932b",background:"transparent",outline:"none",border:"none",cursor:"pointer"}},"Create Party")))}}),r.a.createElement(g.a,{path:"/record/:deletehash",render:function(t){return r.a.createElement(z,Object.assign({albumId:e.state.albumId},t))}}),r.a.createElement(g.a,{path:"/view/:albumid",render:function(t){return r.a.createElement(W,Object.assign({albumId:e.state.albumId,deletehash:e.state.deletehash},t))}}))}}]),t}(a.Component),D=Object(w.a)(R),M=n(162),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(M.a,null,r.a.createElement(D,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/gif-beat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gif-beat","/service-worker.js");N?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):U(t,e)})}}()},17:function(e){e.exports={imgur:{client_id:"0fca5e3f716e204"},spotify:{client_id:"13b5cdf138ff45839285509dbc633ba1"}}},39:function(e,t,n){},77:function(e,t,n){e.exports=n.p+"static/media/photo-camera.cab0ad14.svg"},78:function(e,t,n){e.exports=n.p+"static/media/three-dots.7627bc82.svg"},80:function(e,t,n){e.exports=n.p+"static/media/pattern.4c18f130.svg"},85:function(e,t,n){e.exports=n(159)},90:function(e,t,n){}},[[85,2,1]]]);
//# sourceMappingURL=main.7bede6a2.chunk.js.map